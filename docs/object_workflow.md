---
title: 对象流程映射
---

Steedos中定义的业务对象，可以与[审批王](../workflow)系统集成。可以从台账中发起业务流程，也可以将审批王中的业务流程归档到台账中。

## 从审批表单到业务台账

对于审批结束的申请单，可以自动将数据同步到Steedos相关对象中。

### 归档配置

- 一个流程也可以映射为多个对象，建立多个台账。例如合同流程执行完成之后可以进入合同台账和档案台账。
- 多个流程可以映射为同一个对象，例如不同单位的合同审批流程汇总进入同一个合同台账。
- 可设定对象字段与流程表单字段的对应关系。
- 可设定是否同步附件：不同步、同步最新版、同步所有版。

### 自动同步

- 流程发起审批之后，自动同步进入台账，状态为“审批中”。
- 流程审批完成之后，自动同步进入台账，状态为“核准”、“驳回”、“完成”

## 从业务台账发起审批

对于需要领导审批的业务数据，可以一键发送到审批系统进行审批，例如合同新建后可以提交审批。

- 一个对象可以设定一个审批流程。
- 可设定对象字段与流程表单字段的对应关系。
- 可设定是否同步附件：不同步、同步最新版、同步所有版。

### 业务逻辑

- 当对象配置了审批流程，用户界面会增加一个提交审批按钮。
- 根据后台配置的字段映射关系，系统自动生成流程的审批单。
- 根据配置，如果原记录有附件，会自动带上附件。
- 用户选择下一步骤，下一步处理人，点击提交即可开始流程审批。
- 记录的“审批状态”字段自动更新为“审批中”。
- 流程审批每完成一步骤，记录内容和附件会重新同步回Steedos台账中。
- 流程审批完成后，记录的“审批状态”字段自动更新为“核准”、“驳回”、“完成”。

### 界面显示

- 对于可审批的记录，界面显示“发起审批”按钮。
- 每条记录只能同时发起一个审批，前一个审批结束之后可以发起新的审批。
- 在记录的相关列表中，显示申请单子表，列出记录的审批历史。点击弹出申请单显示页面。

## 配置对象与流程映射关系

只需配置好1个对象和1个流程的映射业务逻辑，即可实现：

- 从对象记录发起流程，并根据字段映射关系将记录的信息、相关附件传入表单，并执行对象至表单的脚本。
- 表单流程流转时及流转完成后，即时依据将字段映射关系将表单里的字段信息、相关附件传入对象，并执行表单至对象的脚本。
- 对象记录的相关审批单中，可以查看审批单的即时进展。

设置对象流程，主要包括以下内容的设置：

- 名称
- 对象: 系统对象，或自定义对象
- 流程: 审批流程
- 字段映射关系（对象到表单）
  - 表单字段：表单的默认字段、表单的自定义字段
  - 对象字段：对象的默认字段、对象的自定义字段、对象的引用对象的字段
- 字段映射关系（表单到对象）
  - 对象字段：对象的默认字段、对象的自定义字段
  - 表单字段：表单的默认字段、表单的自定义字段
- 附件同步方式: 不同步/同步最新版本/同步所有版本
- 脚本
  - 对象至表单
  - 表单至对象
