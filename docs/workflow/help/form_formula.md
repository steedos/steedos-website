## 字段公式

给字段增加公式之后，填写审批单的时候，就无需录入此字段的值，而是由系统根据公式得到相应的值。

### 常见的公式包括：
- 取一个字段的值：使用“{”和“}” (注意都是半角)将字段名扩起来，如：{请假天数}
- 基于数值字段的函数：
 - 加：{字段名1}+{字段名2}
 - 减：{字段名1}-{字段名2}
 - 乘：{单价}*{数量}
 - 除：{总金额}/{数量}
- 基于表格（子表）中的数值字段的函数：
 - 合计:   sum({费用})
 - 平均值：average({费用})
 - 计数：  count({物品})
 - 最大值：max({费用})
 - 最小值：min({费用})
 - 金额大写：numToRMB({金额})
- 基于提交人的系统变量：包括姓名、角色、部门等
 - 提交人的姓名：{applicant.name}
 - 提交人所在部门（当申请人属于多个部门时，为所在主部门的全路径）： {applicant.organization.fullname}
 - 提交人所在部门（最底层部门名）： {applicant.organization.name}
 - 提交人的角色名： {applicant.roles}
 - 提交人的手机： {applicant.mobile}
 - 提交人的固定电话： {applicant.work_phone}
 - 提交人的职务： {applicant.position}
- 基于姓名表单字段的系统变量：包括姓名、角色、部门等
 - “报销人”所在部门（当报销人属于多个部门时，为所在主部门的全路径）： {报销人}.organization.fullname
 - “报销人”所在部门（最底层部门名）： {报销人}.organization.name
 - “报销人”的角色名： {报销人}.roles
 - “报销人”的姓名： {报销人}.name
 - “报销人”的手机： {报销人}.mobile
 - “报销人”的固定电话： {报销人}.work_phone
 - “报销人”的职务： {报销人}.position
- 基于签批字段的公式使用：
 - 显示此步骤所有意见，含传阅 ： {traces.步骤名称}
 - 只显示此步骤的传阅意见： {traces.步骤名称.cc}
