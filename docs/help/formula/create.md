---
title: 构建公式字段
---

## 如何构建公式字段

![如何构建公式字段](/assets/help/formula/field.png)

- 按照与创建自定义字段相同的方式开始构建一个公式字段，字段类型选择公式。
- 选择公式的数据类型。根据计算的输出值为您的公式选择适当的数据类型。
- 选择数值、金额或百分比数据类型的小数位数，数字长度最长为18位数。
- 如果您的公式引用任何数字、金额或百分比字段，则应选择一个选项以处理空白字段。
- 可以在公式中引用当前对象上的“相关表”或“主表/子表”字段来实现跨对象公式。
- 可以在公式中输入_id来引用当前记录的id值。
- 可以在公式中输入$user变量来引用当前登录用户的相关信息。
- 也可在描述框中输入公式字段描述，单击保存完成操作。

## 重算公式值

对于已经存在的历史记录数据，很多情况下公式字段值不会重新计算，此时您应该选择公式字段后台详细配置页面上的“重算公式值”按钮来手动重新计算该值。这些情况包括但是不限于以下情况：

- 更改公式字段定义（如小数位数，公式内容，数据类型、空白字段处理等）。
- 更改在公式内容中引用字段的相关属性，比如更改其字段类型、小数位数，更改其公式字段的数据类型、公式表达式或其他属性等。

:::note 提示

在正式环境中请谨慎修改对象的某些字段属性，比如字段类型，字段公式表达式，下拉选择框可选项列表等，因为对于已经存在的历史记录数据可能不会重新触发字段值重算，对于公式字段值，只能通过手动操作这里的“重算公式值”按钮来修正历史数据。

:::
