---
title: 公式中的运算符和函数
---


## +（加）
计算两个值的和。

**使用：** `值 1 + 值 2`，并用合并字段、表达式或其他数值替换每个值。

**返回值：** 数值


```js
Amount + Maint_Amount__c + Services_Amount__c
```
此公式计算产品 Amount（金额）、维护金额与服务费的总和。请注意，Maint amount（维护金额）和 Service Fees（服务费）是自定义币种字段。

```js
Monday_Hours__c + 
Tuesday_Hours__c + 
Wednesday_Hours__c + 
Thursday_Hours__c + 
Friday_Hours__c > 40
```
使用如上验证规则中的公式，可以在为各个工作日输入的工作时间总和大于 40 时显示下面的错误消息：“总工作时间不能超过 40 个小时”。本示例要求自定义对象上有五个自定义字段，每个工作日一个。


## BEGINS
确定文本是否以特定字符开头，如果是则返回 TRUE（真）。如果不是，则返回 FALSE（假）。

**使用：** BEGINS(文本, 比较文本)

**参数：** 
- *文本:* `text`
您希望进行比较的字符全文或字段。
- *比较文本:* `text`
用于比较的文本片断。

**返回值：** 布尔

```js
IF(BEGINS (Product_type__c , “ICU”), “Medical”, “Technical”)
```
如果产品类型自定义文本字段中的文本以“ICU”开头，则此示例返回文本“Medical”（医疗）。对于所有其他产品显示“Technical”（技术）。

:::note 技巧提示
- ■ 此函数区分大小写，因此，请确保比较文本值的大小写正确无误。
- ■ 在验证规则或工作流规则中使用此函数时，留空的字段被视为有效。例如，如果您的验证规则要测试资产序列号是否以“3”开始，则序列号为空的所有资产都将视为有效
:::

## BLANKVALUE
判断表达式是否具有值，如果没有值则返回一个置换表达式。如果表达式具有值，则返回表达式的值。

**使用：** BLANKVALUE(表达式, 置换表达式)

**参数：** 
- *表达式:* `text`
您希望计算的表达式。
- *置换表达式:* `text`
您希望替换任何空白值的值。

```js
BLANKVALUE(Department, "Undesignated")
```
如果部门字段包含值则此公式返回部门字段的值。如果部门字段为空，则此公式返回词语未指定。

```js
BLANKVALUE(Payment_Due_Date__c, StartDate +5)
```
此公式返回当 Payment Due Date（付款到期日期）为空时，合同开始日期之后第五天的日期。Payment Due Date（付款到期日期）是自定义日期字段。

:::note 技巧提示
- ■ 如果字段包含字符、空白或零，则则字段不为空。例如，如果字段包含使用空格键插入的空格，则该字段不为空。
- ■ 如果字段没有值，则使用 BLANKVALUE 函数返回指定字符串；如果您只想检查字段是否有值，则使用[ISBLANK](url)函数。
- ■ 如果您对数值字段使用该函数，则字段没有值且未配置将空白字段处理为零时，该函数只返回空字符串。
:::

:::caution 注意
该函数与[ISBLANK](url)很像，但是该函数只支持返回字符串，一般来说，您应该使用后者而不是该函数。
:::

## DATEVALUE
为日期、日期时间或文本表达式返回日期值。

**使用：** DATEVALUE(表达式)

**参数：** `date/datetime/text` 
日期、日期时间或日期、日期时间格式的文本值的合并字段或表达式

```js
DATEVALUE(ClosedDate) 
```
基于结束日期时间字段值显示日期值，参数ClosedDate可以是日期、日期时间类型，也可以是日期、日期时间格式的字符串类型。


```js
DATEVALUE("2005-1-15 12:30")
```
以日期值形式返回“2005-01-15”。

:::note 技巧提示
- ■ 如果该函数中所引用的字段不是有效的文本或日期/时间字段，则该公式中的字段可能显示为异常字符串或错误信息，比如DATEVALUE("2005-111-15") 将返回NaN-NaN-NaN。
- ■ 当输入日期时，请将日期放在引号内，并使用如下格式：YYYY-MM-DD，即，四位数字年份、两位数字月份和两位数字日期。
- ■ 如果表达式不在有效的日期范围内（例如，MM 不在 01 和 12 之间），则该公式中的字段将显示“NaN-NaN-NaN”。
- ■ 该公式始终会返回utc（协调世界时间）0点值，且除非传入的参数明确带了时区信息，否则将始终使用用户的时区计算，比如DATEVALUE('2018-12-12 06:06:06')返回的是2018-12-11，而DATEVALUE('2018-12-12T06:06:06Z')返回的是2018-12-12。
:::

## DATETIMEVALUE
返回年份、月份、日和 GMT 时间值。

**使用：** DATETIMEVALUE（表达式）

**参数：** `text` 
不带TZ字符的日期时间格式的文本值、合并字段或表达式

```js
DATETIMEVALUE(TEXT(ClosedDate))
```
基于结束日期字段值显示日期时间值，参数ClosedDate必须是日期类型，而不可以是日期时间类型， 因为如果ClosedDate是日期时间类型，TEXT(ClosedDate)返回的会是"2020-11-04 03:45:00Z"这种带Z的字符串。

```js
DATETIMEVALUE("2005-11-15 17:00:00") 
```
以日期和时间值形式返回“2005-11-15T17:00:00.000Z”（即utc时间2005 年 11 月 15 日17点整）。

:::note 技巧提示
- ■ 始终使用 GMT 时区计算 DATETIMEVALUE，而且不能更改。
- ■ 当输入特定日期时，请将日期放在引号内，并使用如下格式：YYYY-MM-DD，即，四位数字年份、两位数字月份和两位数字日期。
- ■ 如果表达式不在有效的日期范围内（例如，MM 不在 01 和 12 之间），则该公式中的字段将返回错误信息。
- ■ DATETIMEVALUE不支持带TZ的字符串写法，其返回值本身就按utc值来的，而DATEVALUE是同时支持带TZ和不带TZ字符串两种写法的，而且不带TZ的会按本地时区规则返回日期值（即可能返回前一天的日期值）。
- ■ DATETIMEVALUE只接受日期或日期时间字段转换为文本后的值作为参数，即不可以传入非文本值作为参数，而DATEVALUE同时支持传入日期、日期时间类型，或者日期、日期时间格式的字符串类型。
- ■ 因为TEXT(NOW())返回的格式是带Z的，所以DATETIMEVALUE(TEXT(NOW()))将直接报错，可以使用DATETIMEVALUE(TEXT(TODAY()))或DATETIMEVALUE(TEXT(DATEVALUE(NOW())))代替。
:::