---
title: 批准过程
sidebar_label: 批准过程
---

## 设置批准过程

### 准备创建批准过程
在创建批准过程之前审查以下清单。

1. 确定批准请求发送人
2. 确定所分配的批准人
3. 确定重新分配的批准人
4.  决定批准过程是否需要筛选
5. 设计初始提交操作
6. 确定用户是否可以编辑待批准的记录
7. 决定记录是应自动批准还是被拒绝
8. 确定批准过程包含多少个级别
9. 确定批准请求被批准或被拒绝时的操作

#### 谁是批准请求的发起人？
批准请求通知发送自提交待批准记录的用户。

#### 谁可以批准请求？
以下任何人都可以批准或拒绝请求。
1. 批准请求提交者选择的用户
2. 指定用户处理
3. 指定审批角色
4. 指定审批岗位
5. 指定相关用户字段

#### 您是否希望将批准请求重新分配给其他用户进行批准？
批准人可以委派批准请求，可重新分配给其他用户处理。

#### 这一过程包括哪些记录？
确定记录必须具有哪些属性才能包括在您的批准过程中。如果需要，请创建自定义字段以存储这些信息，以便您在指定条目条件中使用。例如，如果仅希望包括总部办公室的费用记录，请创建名为办公位置的自定义选项列表字段，它具有两个选项：“总部”和“字段”。然后，您将在指定条目条件中指定，包括在批准过程中的记录，必须有“总部”在办公位置字段中。

#### 第一次提交记录以等待批准时会发生什么？
当用户提交记录等待批准时，华炎魔方会自动锁定记录，因此在记录等待批准的过程中，其他用户无法更改该记录。
决定是否希望在第一次提交记录时发生其他工作操作，例如字段更新等。这些操作将成为您的初始提交操作。

#### 谁可以编辑待批准的记录？
提交待批准的记录被锁定。具有给定对象的“修改所有”对象级权限或“修改所有数据”权限的用户总是可以解锁和编辑记录。您还可以指定当前分配的批准人可以编辑记录。

#### 能否根据特定条件自动批准、拒绝或跳过记录？
您可为流程的每个步骤设置准入条件。如果记录未满足条件，配置批准、拒绝或跳过流程。例如，自动批准所提交的金额小于1000元的所有费用。

#### 需要多少人批准这些请求？
批准过程可以具有多层批准。确定需要批准请求的用户数量及顺序。

#### 批准或拒绝请求时会发生什么？
当请求被调回、批准或拒绝时，你可以设置锁定记录以免进行编辑或者取消锁定可以进行编辑，以及相应的字段更新。

### 创建批准过程
#### 控制哪些记录应用于批准过程
如果你希望所有记录都通过批准过程，可在指定条目条件中输入1=1。如果只考虑特定记录类型，可输入进入的条件或公式。当提交的记录满足条件或公式，则可进入该批准过程。

#### 示例
只有折扣批准截止日期小于 30 天时，该公式才允许记录进入该批准过程。
(Discount_Approval_CutoffDate__c < (CloseDate - 30)

#### 选择整个批准过程的自动批准人
通过以下选项之一设置下个批准人。
1. 提交人手动指定用户来批准所有批准请求。
自动分配至批准人：
2. 指定用户处理
3. 指定审批角色
4. 指定审批岗位
5. 指定相关用户字段

#### 指定谁可以编辑锁定的记录
记录提交等待批准时，它将被锁定，以防止用户在批准过程中编辑该记录。只有管理员可以编辑在该批准过程中被锁定的记录。

#### 指定谁可以提交记录到批准过程（即将上线）
只有指定的个人才可以提交记录以待批准。您也可以允许提交者调回批准请求。

#### 初始提交人
提交者类型：
选择一个类型或搜索以填充可用提交者列表。
允许的提交者：
如果该列表中不包括提交记录以待批准的用户，记录不会进入该批准过程，即使记录满足进入条件。

#### 提交设置：
允许提交者调回批准请求：	
如果选中，提交者可以调回他们的批准请求。如果未选中，只有管理员可以召回请求。
在提交人等待批准期间，如果提交者一方的情况发生改变，此选项十分实用。

### 向批准过程添加批准步骤
#### 控制哪些记录应用于批准步骤
通过设置步骤标准控制哪些记录作为批准步骤的一部分。您还可以指定不符合步骤标准时如何处理记录。

#### 标准选项
如果所有记录都通过该批准步骤，选择 所有记录均应进入此步骤。
如果仅特定类型的记录应进入此过程，请选择如果满足以下条件，则进入此步骤...，然后输入需满足的条件。

#### 如果不满足条件，则：
1. 批准记录：批准请求，执行所有最终批准操作。
2. 拒绝记录：拒绝请求，执行所有最终拒绝操作。
3. 转到下一步	：
跳过此步骤并转到下一步。只有当这是以后的步骤时可用。
当您在第一步应用该选项时，谨记：
4. 如果记录不符合任何随后步骤的标准，记录会被拒绝。
5. 如果您删除以后的所有步骤，华炎魔方会拒绝该记录。
当您在其他步骤中应用该选项时，谨记：
6. 如果您删除以后的所有步骤，华炎魔方会结束该过程。

#### 为批准步骤识别分配批准者
指定在该步骤中将批准请求发送给谁。
1. 选择批准者：
指定将批准分配给谁。
2. 让提交人手动选择批准人（默认值）
提示用户选择下一个批准者。
3. 自动分配给批准人
分配批准请求到指定用户、指定审批角色、指定审批岗位、指定相关用户字段处理。

4. 当选择多个批准者：	
只有当选中自动分配给批准者时可用。
5. 基于首次回复的批准或拒绝
批准请求的第一个响应决定批准记录还是拒绝记录。
6. 需要所有选定批准人一致同意批准
只有在每个人都批准请求时记录才被批准。如果任何批准者拒绝请求，批准请求都会被拒绝。

7. 重新分配的批准者也可批准该请求：
批准者重新分配的批准者不能再次分配批准请求；他们只能批准或拒绝它们。

#### 为批准步骤指定拒绝行为
配置批准者拒绝请求后的结果。
1. 执行所有拒绝操作：
即使已经批准之前的步骤，仍然能拒绝请求。执行此步骤中指定的所有拒绝操作以及所有最终拒绝操作。
2. 仅执行此步骤的拒绝操作：
拒绝请求，将批准请求返回前一个批准人。执行为此步骤指定的所有拒绝操作。

### 批准过程的自动操作
当发生操作时，每个批准过程都会组织到操作组中，例如初始提交。若要将自动操作添加到批准过程，确定要将其添加到哪个操作组中。

1. 初始提交	
用户第一次提交记录以待批准。	默认操作：记录锁(锁)
2. 批准步骤批准	
已针对记录提供该步骤的所有必要批准。	默认操作：无
3. 批准步骤拒绝	
批准人拒绝该步骤的请求。	默认操作：无
4. 最终批准	
已针对记录提供所有必要批准。	  默认操作：记录锁(锁)
5. 最终拒绝	
批准人拒绝该请求，它转至最终拒绝状态。	默认操作：记录锁(解锁)
6. 调回	
调回提交的批准请求。	默认操作：记录锁(解锁）

### 启用批准过程
在为批准过程创建至少一个步骤后，启用该过程。
1. 进入批准流程，选择需启用的批准过程。
2. 确保配置正确。
3. 点击最右边的倒三角框，选择启用。

## 批准的限制和注意事项
### 配置批准时的注意事项
当创建或编辑批准过程时，谨记批准如何兼容其他功能。在您开始之前，绘制出您的批准过程步骤。

#### 与其他功能的兼容性
流程可以删除待批准的记录。
设计自动操作，以便您能在批准过程中使用它们。

#### 批准中的字段更新操作
批准过程可以指定重新评估更新对象的字段更新操作。但是，如果重新评估包含一个跨对象字段更新，则忽略其他跨对象字段更新。

#### 预期错误
考虑审查批准错误的内容。这样，您可以预测常见问题和配置您的批准过程，减小错误发生的可能性。

### 设置批准人时的注意事项
当您为特定的批准步骤指定批准人，应谨记一些事情。
1. 具有以下权限的用户可以响应批准请求。
“修改所有数据”权限
对象的“修改所有”权限
2. 确保所分配的批准人有权读取批准请求的记录。例如，不能查看费用记录的用户无法查看费用批准请求。
3. 可让用户手动选择批准人的批准过程也会让用户将自己选为批准人。
4. 你可以在单一步骤中向相同用户多次分配批准请求。但是，系统只向该用户发送一个请求。

### 管理批准时的注意事项
当维护现有批准过程（包括启用或删除它们）时应谨记一些东西。

#### 管理权限
具有其中一些权限的用户被视为批准管理员。
1. 指定对象的修改所有对象级别权限
2. 修改所有数据用户权限
批准管理员可以：
3. 批准或拒绝等待批准的请求，无需作为批准过程的一部分。
4. 编辑已锁定以待批准的记录。

#### 启用批准过程
1. 批准过程必须至少具有一个步骤，您才能启用它。
2. 在您启用批准过程之前，请先测试它。

#### 删除批准过程
删除批准过程之前：
1. 确保其已停用。
2. 删除与其相关联的等待批准请求。

## 批准过程示例
### 批准过程示例：支出报表
如果贵公司要求员工提交支出报表以供管理员批准，可以在华炎魔方中使此过程自动化。
使用本示例创建总部办事处所有员工的两步支出报表批准过程。该过程指定自动批准低于 500元的支出，500元及以上的支出要求得到部门经理批准，而高于 10000 元的支出还要求得到总经理的额外批准。该示例突出了平行批准过程和“其他”选项。

#### 准备
创建批准过程之前：
如果没有用于跟踪支出的自定义对象，请创建名为“支出报表”的自定义对象。添加适当的字段，如金额、备注、状态、开始日期和结束日期。
针对用户对象创建名为办公地点的自定义字段。向办公地点为总部的用户分配“总部”值。

#### 创建批准过程
使用“支出报表”自定义对象创建批准过程并指定以下内容：
1. 该批准过程的指定目录条件是（当前用户：办公位置等于总部）。记录必须先符合此条件，才能提交到此批准过程。
2. 选择部门经理字段作为下一个自动批准人。
3. 选择记录所有人或希望其可以提交支出报表的任何其他用户。

#### 创建两个批准步骤：
创建步骤名称步骤 1：部门经理批准具有以下规范：
1. 此步骤称作步骤 1：部门经理批准。
2. 选择如果满足以下条件，则进入此步骤，然后选择条件得到满足。此外，为其他选项选择批准记录。
3. 将筛选条件设置为：支出：金额大于或等于 500。
4. 在自动分配给批准人选项中，选择提交请求的用户的部门经理。
5. 在批准过程中，如果要让其他的用户批准请求，请选择重新分配批准人批准此请求。

创建第二个批准步骤名为步骤 2：总经理批准并指定以下内容：
1. 使用筛选条件支出金额大于或等于 10000。
2. 选择自动分配给批准人，然后选择总经理审批。
3. 选择需要所有选定批准人一致同意批准选项。除非指定用户都批准，否则不会批准请求。
4. 在批准过程中，如果要让其他的用户批准请求，请选择重新分配批准人批准此请求。
5. 选择只执行此步骤的拒绝操作...，以便在拒绝请求时请求返回到上一步以供更改。

提示 考虑创建以下最终批准操作：
1. 定义字段更新以将状态字段自动更改为“已批准”。
2. 向提交支出报表的用户发送批准通知。

#### 结尾步骤
1. 测试批准过程，然后将其启用。

### 批准过程示例：职位候选人
贵公司面试某个职位的候选人时，可能需要若干级别的批准后才能发送录用通知书。使用此示例创建要求若干管理级别批准的三步批准过程。

#### 准备
创建批准过程之前：
如果没有用于跟踪候选人的自定义对象，请创建名为“候选人”的自定义对象。添加适当的字段，如薪资、录用通知书延期发出和聘用日期。

#### 创建批准过程
使用下列规范在“候选人”自定义对象上创建批准过程：
1. 不要输入筛选条件，因为您希望提交的所有录用通知书都获得批准。
2. 选择管理员字段作为下一个自动批准人。
3. 选择记录所有人或希望其可以提交录用通知书的任何其他用户。
4. 创建三个批准步骤：

创建步骤名称步骤 1：管理员批准：
1. 无须任何筛选，因为您希望所有记录都前进到此步骤。
2. 在自动分配给批准人选项中，选择提交请求的用户的管理员。
3. 在适用的情况下，如果要允许委派的批准人字段中的用户批准请求，请选择批准人的代理也可以批准此请求。

创建第二个步骤名为步骤 2：VP 批准：
1. 无须任何筛选，因为您希望所有记录都前进到此步骤。
2. 选择让用户选择批准人，以使管理员可以选择适当的 VP 批准请求。
3. 在批准过程中，如果要让其他的用户批准请求，请选择重新分配批准人批准此请求。
4. 选择只执行此步骤的拒绝操作...，以便在 VP 拒绝请求时请求返回到管理员以供更改。

创建第三个步骤名为步骤 3：CFO 批准：
1. 无须任何筛选，因为您希望所有记录都前进到此步骤。
2. 选择自动分配给批准人并选择 CFO 的姓名。
3. 在批准过程中，如果要让其他的用户批准请求，请选择重新分配批准人批准此请求。
4. 选择执行此步骤的所有拒绝操作和所有最终拒绝操作。（最终拒绝）因此，您的 CFO 拒绝的所有录用通知书被完全拒绝。

#### 结尾步骤
1. 测试批准过程，然后将其启用。

## 批准用户请求
### 提交记录以待批准
您可以直接从记录提交记录以待批准。
提交记录以待批准所需用户权限需对记录具有读取权限。
1. 转至您希望提交以待批准的记录。
2. 确保准备提交。
在提交待批准记录之前，记录必须满足活动批准过程的条件。
3. 提交批准。
如果批准过程适用于记录，会自动开始批准过程。该按钮在提交记录后不可用。

### 撤销批准请求
如果您提交了记录以待批准，但是突然需要更新记录中的信息，可以调回批准请求。然而，您能否调回批准请求取决于您的管理员如何配置批准过程来处理提交的记录。
撤销批准请求所需用户权限需对记录具有读取权限。
1. 转至与批准请求有关的记录的详细页面。
2. 在批准历史相关列表中，调回批准请求。

### 回应批准请求
您收到批准请求时，通过批准、拒绝或重新分配进行回应。

### 批准历史
 若要跟踪批准流程中的记录，查看其批准历史相关列表。
1. 已提交：记录已提交待批准。
2. 待处理：记录已提交待批准，正在等待批准或拒绝。
3. 已批准：记录已批准。
4. 已拒绝：记录已被拒绝。
5. 已重新分配：记录已提交待批准，但被分配至其他批准人。
6. 已调回：提交记录用于批准，但是从批准过程调回。

## 批准过程术语
### 批准操作
执行批准过程时系统自动执行的批准操作，例如锁定记录、更新相关字段。

### 批准过程
批准过程用于配置记录如何在华炎魔方中批准。批准过程会指定批准的每个步骤，包括请求批准发起对象和过程中每个时间点或环节需要采取的操作。

### 批准通知
批准通知是应用程序通知，用于通知相关处理人，记录已提交待批准。

### 批准步骤
批准步骤定了一个特殊的批准过程的所有批准环节。每个步骤会决定
1. 哪些记录可以转到该步骤
2. 分配批准请求的处理人
第一步指定如果记录不前进到该步骤时应如何处理。后来的步骤指定如果批准者拒绝该请求会怎样。

### 分配的批准人
分配的批准人是负责响应某批准请求的用户。

### 重新分配批准人
重新分配批准人是由分配的批准人重新指定处理批准请求的人员。

### 初始提交操作
当用户第一次提交记录以待时，发生初始提交操作。默认情况下，记录被锁定。

### 最终批准操作
在完成所有必需批准时实施最终批准操作。

### 最终拒绝操作
当批准者拒绝请求并转为最终拒绝状态时发生最终拒绝操作。

### 批准过程实例（申请单）
批准过程实例代表批准过程的一个实例。每次记录提交待批准时，都会创建一个新的批准过程实例。

### 批准过程实例节点（签核历程）
批准过程实例节点代表批准过程步骤的一个实例。记录每次在批准过程中输入一个步骤时，系统均会创建过程实例节点。当记录不满足步骤条件时或批准过程实例在未输入步骤的情况下完成，则系统不会创建过程实例节点。

### 调回操作
当提交的批准请求被调回时，发生调回操作。默认情况下，记录解除锁定。

### 记录锁定
记录锁定防止用户编辑记录（无论字段级安全或共享设置如何）。默认情况下，华炎魔方锁定等待批准的记录。只有管理员可以编辑锁定的记录。

## 管理多个批准请求（即将上线）
1. 转移等待批准的请求
2. 删除等待批准的请求
