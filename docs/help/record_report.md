---
title: 分析数据
---

华炎魔方内置功能强大的报表统计与分析功能。通过简单设定，即可配置出功能强大的统计报表。

进入相关应用程序后，点击顶部“报表”导航进入到报表列表视图界面。用户可以看到自己有权限的报表，同时也可以创建自己的报表。

![新建报表](/assets/help/record_report/新建报表.png)

## 报表基本属性

- **名称：**报表的名称；

- **报表类型：**下拉选项，可选项有表格（列表）、摘要（分组列表）、矩阵（二维表）、JsReport（需要安装插件才有），可根据用户的实际使用需求选择对应的报表类型；

- **报表数据来源：**下拉选项，可选项有OData、Graphql。默认为OData，目前Graphql选项只有JsReport报表在用。

- **对象名：**报表统计的主对象；

- **字段：**在报表中需要使用的字段，只有二维表类型的报表才需要配置该属性；

- **行：**在报表中要显示或汇总的行字段，只有摘要和矩阵类型的报表才需要配置该属性，前者行表示按行分组汇总显示报表，后者行表示二维报表中的以哪个字段作为行汇总维度。

- **列：**表格、摘要类型报表中表示要显示的列，二维报表中表示以哪个字段作为列汇总维度。

- **统计：**要汇总计算的字段，可多选。表格类型报表不需要配置该属性，摘要类型报表中表示按行分组统计时统计哪个字段值总和，矩阵类型报表中表示按行和列交叉统计时统计哪个字段值总和。

- **默认过滤字段：**显示报表时，在过滤器里默认显示的过滤字段，可配置每个字段是否必填，当指定为必填时，报表的过滤条件中未指定这些字段时不显示报表内容。

- **描述：**报表的描述。

- **显示图表：**是否要在报表顶部用图形化方式显示统计数据。不支持表格类型报表；

- **显示小计：**是否显示小计值。不支持表格类型报表；摘要类型报表中表示是否显示行分组汇总小计；矩阵类型报表不支持该属性，因为它始终显示小计。

- **显示总计：**是否显示统计后的总计结果。表格类型报表中表示是否在底部显示记录个数总计；摘要类型报表不支持该属性，矩阵类型报表中表示是否显示行和列的交叉总计。

- **显示记录数：**是否显示相关汇总结果对应的记录个数。不支持表格类型报表；摘要类型报表中表示是否显示行分组汇总时的记录个数；矩阵类型报表中表示是否额外显示行、列及交叉汇总时的记录个数。

- **JsReport分组中相关属性：**需要安装`@steedos/plugin-jsreport`插件才能使用，把相关脚本拷贝到这里对应的文本框就行，详细请见[jsreport报表](/developer/report_jsreport#jsreport报表)

:::note 技巧提示

- *表格（列表）、摘要（分组列表）、矩阵（二维表）这三种基本报表目前最大支持的统计数为1w条，如果您的数据可能超出该限制请使用jsreport报表类型。

- *报表类型可选下拉项中默认支持表格（列表）、摘要（分组列表）、矩阵（二维表）这三种基本报表，要想使用其他报表类型请安装相关插件，比如jsreport报表。

- *目前三种基本报表类型只支持SUM总和汇总统计和COUNT记录个数统计，其他汇总类型比如平均值AVG、最大值MAX、最小值MIN都不支持。

- *表格类型报表是通过“显示总计”勾选框来设置是否显示记录个数统计，而另外两个报表类型是通过“显示记录数”勾选框来设置是否显示记录个数统计。

:::

## 切换显示图表

在报表右上角的图标中，有一个饼图按钮，点击可切换显示或隐藏当前报表顶部的图形化统计结果组件。该功能不支持表格类型报表，只支持摘要（分组列表）、矩阵（二维表）报表。

报表是否默认显示图形化统计结果组件，可以在新建或编辑报表时勾选“显示图表”勾选框来配置。

## 报表筛选器

与列表视图类似，您应该尽量缩小报表的数据显示范围，确保您要统计的是最相关的记录。要更改报表的数据查找范围，请点击报表右上角的漏斗图标按钮来编辑报表的筛选器。

如果报表在默认过滤字段中配置了必填过滤字段，则报表默认不显示内容，直到用户在过滤器中指定了这些必填的过滤字段。

提示 不可以直接在新建或编辑报表界面设置过滤条件，只能通过这里的“报表筛选器”来变更报表的过滤条件，对于用户有编辑权限的报表，这里的筛选器中定义的过滤条件都可以通过报表右上角的保存按钮来保存为当前报表的过滤条件。

## 刷新报表

与列表视图一样，报表数据并不是实时更新的，如果想看到最新数据统计结果，请点击报表右上角的刷新图标按钮来刷新报表。

## 导出为EXCEL

与列表视图一样，华炎魔方支持把当前报表所有数据导出为EXCEL。

要导出当前报表数据为EXCEL，请点击报表右上角设置图标，并点击下拉选项中的“导出为EXCEL”按钮。

## 设计报表

报表中有很多布局细节，比如列的显示次序、列宽、列默认排序规则，行、列、统计字段分别是哪个等，这些都可以通过报表设计工具来调整，设计好的结果也可以保存为报表的默认布局。

要对当前报表进行设计，请点击报表右上角的卡片图标以进入设计模式，在报表的设计模式中，可以更改和保存以下报表属性：

- **列的显示次序：**请拖动表头的列放到其他列的左侧或右侧来更改列之前的显示次序，矩阵类型报表不支持该功能。

- **列宽：**请把鼠标放在报表表头的列与列之间，当看到一个带有左右箭头的分隔线图标时可以拖动该图标来改变相邻两列的列宽度，矩阵类型不支持该功能。

- **列默认排序规则：**三种报表类型都支持设置列默认排序规则，但是矩阵类型报表可以额外设置行的默认排序规则，设置方式也稍有差别，详细请查阅[报表排序](#报表排序)

- **变更统计字段：**在设计模式中，您可以通过拖动字段的方式快速变更字段是显示在行、列还是统计字段中，并且这些变更保存后能生效。比如对于摘要类型报表，您可以拖动报表表头的某个列字段并放置在顶部左上角以把该字段从列字段迁移到行分组字段中。对于矩阵类型报表，则可以通过拖动相关区域中字段到另一个区域来实现行、列、统计字段之前互相变换。表格类型报表不支持该功能。

## 报表排序

与列表视图类似，报表也支持通过鼠标点击的方式来变更报表字段排序规则。

请点击报表表头中要排序的列来添加该字段的排序规则，这会同时清除其他列上的排序规则。

如果要使用多字段混合排序，请在要排序的列上右击鼠标，将会显示三个菜单：升序排序、降序排序、清除排序，点击升序或降序可增加字段排序，点击清除排序可清除所有字段上的排序规则。

当字段列上有设置排序规则时，会在其字段名旁边显示箭头，向上的箭头表示升序，反之向下的箭头表示降序，如果没有显示箭头图标表示该字段上没有设置排序规则。

:::note 提示

矩阵类型报表可以额外设置行的排序规则，设置方式也稍有差别，不能点击行或列来设置排序规则，而只能在要排序的行或列上右击鼠标，在弹出的菜单中选择要排序的字段（在同一个字段上多次点击可切换升序和降序规则），或者点击其中的“清除所有排序”菜单项来清除行和列的所有排序设置。

:::

## 报表下钻数据

报表统计结果会以数值形式显示在报表的汇总单元格中，但是无法看出该汇总数值关联到哪些记录，点击单元格弹出的关联记录列表窗口就是指“下钻数据”。只有矩阵报表类型支持该功能 ，点击矩阵报表的汇总数值单元格，会以弹出窗口的形式显示该汇总值来源于哪些关联记录。

默认情况下，下钻数据列表中会显示报表中配置的行、列和汇总字段。当想额外显示更多字段时，可以指定报表中的“字段”属性来配置想要额外显示的字段，详情请参阅：[矩阵（二维表）报表](#矩阵（二维表）报表)

## 表格（列表）报表

实际需求中较少使用该类型报表，相对来说，使用表格类型报表而不是列表视图可能在需要一次性显示或导出大量记录时有较大优势，当数据量较大时，使用报表而不是列表视图也能获得更好的显示性能。

**a. 主要属性**

- 列：报表表头列上要显示的字段。
- 显示总计：是否在底部显示记录个数总计。

**b. 示例**

以下列出了最近公司发生的资产调拨列表明细并在底部汇总出了总记录数。

- 报表类型：表格
- 列：名称、金额、资产.名称、创建时间
- 显示总计：是

![表格列表报表](/assets/help/record_report/表格列表报表.png)

## 摘要（分组列表）报表

当需要按某些分组字段来汇总显示表格时，可以配置一个摘要报表，以在列表中按分组显示表格，摘要报表也支持统计汇总每个分组的记录个数或某些字段的SUM汇总值。

**a. 主要属性**

- 行：分组字段，可多选，指定报表中按哪些字段来进行行分组汇总。
- 列：报表表头列上要显示的字段。
- 统计字段：选中的字段会按行分组来显示小计，可多选。
- 显示图表：是否要在报表顶部用图形化方式显示统计数据。
- 显示小计：是否显示按统计字段显示行分组汇总小计。
- 显示记录数：是否显示行分组汇总时的记录个数。

**b. 示例**

下面的示例显示了当用户在报表中指定了登记日期为去年时，按收支类别来分组列出公司去年的合同履行情况，该报表同时汇总显示了各个收支类别的合同计数及总合同金额值。

- 报表类型：摘要
- 行：收支类别
- 列：合同名称、登记日期、合同履行状态、合同金额。
- 统计字段：合同金额
- 过滤字段：登记日期，并勾选指定为必填过滤字段
- 显示图表：否
- 显示小计：是
- 显示记录数：是

![摘要分组列表报表](/assets/help/record_report/摘要分组列表报表.png)

## 矩阵（二维表）报表

实际需求中较多使用该类型报表，因为这种报表不只能在行和列两个维度进行汇总展示数据统计结果，也能对行列进行交叉汇总总和值。

**a. 主要属性**

- 行：行字段，可多选，有多层时点击左侧行标题可以逐层展开。
- 列：列字段，可多选，有多层时点击上面的列标题可以逐层展开。
- 统计字段：按行和列交叉统计时统计哪些字段值总和，可多选。
- 字段：下钻数据中要显示哪些额外的字段，只需要选择行、列和统计字段中没配置过的字段。
- 显示图表：是否要在报表顶部用图形化方式显示统计数据。
- 显示小计：该属性对矩阵报表无效，因为它始终显示小计。
- 显示记录数：是否额外显示行、列及交叉汇总时的记录个数。

**b. 示例**

以下报表按合同分类列出了公司历年合同统计结果。

- 报表类型：矩阵
- 行：分类.名称
- 列：签订日期
- 统计字段：合同金额
- 显示图表：是
- 显示记录数：否

![矩阵二维表报表](/assets/help/record_report/矩阵二维表报表.png)
