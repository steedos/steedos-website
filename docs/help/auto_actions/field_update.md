---
title: 字段更新操作
---

字段更新操作允许您自动更新字段值。您可以将字段更新与工作流规则、批准过程关联。

开始之前，检查要更新字段的类型。只读字段（如公式字段或自动编号字段）不可用于字段更新。

## 创建字段更新的途径

- 您可以在[新建、编辑工作流规则](/help/auto_workflow/create)时选择已有字段更新选项或创建新的字段更新操作并与之关联。此时会自动选中当前工作流规则基于的对象为该字段更新记录所基于的对象值并且锁定该选项不让更改。
- 您可以在[新建、编辑批准过程](/help/approval/approval_setup)时选择已有字段更新选项或创建新的字段更新操作并与之关联。此时会自动选中当前工作流规则基于的对象为该字段更新记录所基于的对象值并且锁定该选项不让更改。
- 您也可以在设置应用中定位到菜单`流程自动化-工作流操作-字段更新`，然后新建字段更新或编辑某条已有的字段更新记录。这些字段更新记录都可以作为工作流规则、批准过程或其他自动过程的备选字段更新操作。

## 如何创建字段更新

![创建工作流规则](/assets/help/auto_workflow/创建工作流规则.png)

- API名称：在 API 中输入引用该组件的唯一名称。API 名称只能包含小写字母、数字，必须以字母开头，不能以下划线字符结尾或包含两个连续的下划线字符。
- 显示名称：输入此字段更新的名称，下拉框选项或列表界面将显示该名称。
- 对象：该字段更新记录所基于的对象。
- 要更新的对象：选择您要更新其字段的对象，默认为当前选定的对象，您也可以改为选择主表/子表关系中的父对象。
- 要更新的字段：选择要更新的字段。只显示选定的“要更新的对象”中的字段。
- 新字段值类型：支持空值、使用公式设置新值、特定值三个选项。当选择第二个选项时，将根据后续填写的“公式”内容设置新字段值；当选择第三个选项时将使用后续填写的“指定新字段值”内容设置新字段值；如果需要清除该字段已有值为空，请选择第一个选项，但是该选项对必需字段、复选框和其他某些字段类型不可用。
- 公式：当上述“新字段值类型”选定为“使用公式设置新值”时，必填输入公式内容，关于如何填写公式内容，请参考[通过公式计算字段值](/help/formula/summary)。值得注意的是此处公式内容可引用的字段是基于上述“要更新的对象”中选中的对象值，而不是“对象”中选中的对象值。
- 指定新字段值：当上述“新字段值类型”选定为“特定值”时，此处内容必填，其输入框将根据上述“要更新的字段”值的字段类型显示为不同的控件，比如布尔类型字段将显示为勾选框，日期时间类型字段将显示为日期时间控制等。
- 描述：输入此字段更新的描述。

## 将操作与工作流规则和批准过程相关联

您可以在[新建、编辑工作流规则](/help/auto_workflow/create)或[新建、编辑批准过程](/help/approval/approval_setup)时选择已有字段更新选项或创建新的字段更新操作来与之关联。

## 跨对象字段更新

对于所有自定义对象和一些标准对象，您可以创建对子表记录的更改会更新相关主表记录上字段的操作。跨对象字段更新可用于自定义对象与自定义对象之间的主表/子表关系、自定义对象与标准对象之间的主表/子表关系以及标准对象与标准对象之间的主表/子表关系。

例如，在自定义招聘应用程序中，创建一个当候选人（子表）接受职位时将应用程序（主表）的状态设为“关闭” 的工作流规则。再比如，创建规则，以便在客户添加个案留言时将个案状态从“等待客户回复”更改为“进行中”。

## 重新评估工作流规则的字段更新

实际使用中，某个字段更新操作是有可能导致另一个字段更新操作条件被满足的，就目前来说，华炎魔方不会重新评估对象上的工作流规则。

## 字段更新操作的注意事项

了解如何在工作流中充分利用字段更新操作，在为工作流规则或批准过程创建字段更新时，请考虑以下事项：

### 字段更新处理

- 如果单个工作流规则包含的多个字段更新对同一字段应用不同值，则字段更新的结果将不可预知。
- 字段更新可能会影响基于过滤条件的相关列表中的信息。例如，如果设置为要更新业务机会的某个字段（如金额或结束日期），它将影响业务机会的“阶段历史”相关列表，比如增加或减少了一些记录的显示。
- 工作流规则或批准过程中的字段更新无法验证此前有效的字段。出现失效错误的原因是，字段更新操作不会触发验证规则。

### 字段更新操作和自定义字段

- 更改自定义字段的类型之前，请确保它不是工作流字段更新的目标，也未被将在新类型下失效的字段更新公式所引用。
- 您无法删除被字段更新所引用的自定义字段。

### 字段更新操作限制

- 字段更新的结果不会触发其他规则，如验证规则、工作流规则。
- 如果一个字段被“将该字段设置为空值”的字段更新使用，则不应该将其设置为通用必填字段。
