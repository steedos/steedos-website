---
title: 批准过程
sidebar_label: 概述
---

您很可能熟悉工作流形式的过程自动化。批准过程在自动化处理方面更进一步，让您可以指定批准记录所必需的步骤序列。

批准过程的自动操作会记录如何在华炎魔方中批准。批准过程会指定批准的每个步骤，包括请求批准发起对象和过程中每个时间点或环节需要采取的操作。

例如：

- 当支出记录提交以供批准时，它将被锁定以便用户无法编辑它，并将其状态更改为“已提交”。
- 如果金额为 50 美元或以下，则批准请求。如果金额高于 50 美元，向直接经理发送批准请求。如果金额高于 5,000 美元，且第一个批准请求得到批准后，向副总裁发送批准请求。
- 如果所有批准请求均得到批准，则将状态更改为“已批准”，并解锁记录。如果任何批准请求被拒绝批准，则将状态更改为“已拒绝”，并解锁记录。

## 批准的限制和注意事项

在您通过批准过程自动化某些操作之前，应注意限制和注意事项。

因为用户无法了解当他们单击提交待批准时将触发哪个批准过程，用户需要熟悉每个批准过程的条件以及每个批准过程的任务。如果记录不符合输入条件或者他们不是任何批准过程的允许提交者，华炎魔方会显示出错。

### 配置批准时的注意事项

当创建或编辑批准过程时，谨记批准如何兼容其他功能。在您开始之前，绘制出您的批准过程步骤。

#### 批准条件

在批准条件中，请勿引用解析随机值的表达式。这样，如果需要重新评估条件，则每次会以相同方式评估记录。

#### 与其他功能的兼容性

- 流程可以删除待批准的记录。
- 设计自动操作，以便您能在批准过程中使用它们。

#### 批准中的字段更新操作

- 批准过程可以指定重新评估更新对象的字段更新操作。但是，如果重新评估包含一个跨对象字段更新，则忽略其他跨对象字段更新。
- 为批准操作执行的字段更新不会触发工作流规则或者授权过程。

#### 预期错误

考虑审查批准错误的内容。这样，您可以预测常见问题和配置您的批准过程，减小错误发生的可能性。

### 设置批准人时的注意事项

当您为特定的批准步骤指定批准人，应谨记一些事情。

（1）具有以下权限的用户可以响应批准请求。

- “修改所有数据”权限
- 对象的“修改所有”权限

（2）确保所分配的批准人有权读取批准请求的记录。例如，不能查看费用记录的用户无法查看费用批准请求。

（3）可让用户手动选择批准人的批准过程也会让用户将自己选为批准人。

（4）你可以在单一步骤中向相同用户多次分配批准请求。但是，系统只向该用户发送一个请求。

### 管理批准时的注意事项

当维护现有批准过程（包括启用或删除它们）时应谨记一些东西。

（1）管理权限
具有其中一些权限的用户被视为批准管理员。

- 指定对象的修改所有对象级别权限
- 修改所有数据用户权限
批准管理员可以：
- 批准或拒绝等待批准的请求，无需作为批准过程的一部分。
- 编辑已锁定以待批准的记录。

（2）启用批准过程

- 批准过程必须至少具有一个步骤，您才能启用它。
- 在您启用批准过程之前，请先测试它。
- 启用批准过程后，您无法添加、删除或更改步骤的顺序或更改拒绝或跳过行为，即便该过程无效。

（3）删除批准过程
删除批准过程之前：

- 确保其已停用。
- 删除与其相关联的等待批准请求。

## 批准过程术语

- **批准操作**
执行批准过程时系统自动执行的批准操作，例如锁定记录、更新相关字段。

- **批准过程**
批准过程用于配置记录如何在华炎魔方中批准。批准过程会指定批准的每个步骤，包括请求批准发起对象和过程中每个时间点或环节需要采取的操作。

- **批准通知**
批准通知是应用程序通知，用于通知相关处理人，记录已提交待批准。

- **批准步骤**
批准步骤定了一个特殊的批准过程的所有批准环节。每个步骤会决定哪些记录可以转到该步骤和分配批准请求的处理人。

  第一步指定如果记录不前进到该步骤时应如何处理。后来的步骤指定如果批准者拒绝该请求会怎样。

- **分配的批准人**
分配的批准人是负责响应某批准请求的用户。

- **重新分配批准人**
重新分配批准人是由分配的批准人重新指定处理批准请求的人员。

- **初始提交操作**
当用户第一次提交记录以待时，发生初始提交操作。默认情况下，记录被锁定。

- **最终批准操作**
在完成所有必需批准时实施最终批准操作。

- **最终拒绝操作**
当批准者拒绝请求并转为最终拒绝状态时发生最终拒绝操作。

- **批准过程实例（申请单）**
批准过程实例代表批准过程的一个实例。每次记录提交待批准时，都会创建一个新的批准过程实例。

- **批准过程实例节点（签核历程）**
批准过程实例节点代表批准过程步骤的一个实例。记录每次在批准过程中输入一个步骤时，系统均会创建过程实例节点。当记录不满足步骤条件时或批准过程实例在未输入步骤的情况下完成，则系统不会创建过程实例节点。

- **调回操作**
当提交的批准请求被调回时，发生调回操作。默认情况下，记录解除锁定。

- **记录锁定**
记录锁定防止用户编辑记录（无论字段级安全或共享设置如何）。默认情况下，华炎魔方锁定等待批准的记录。只有管理员可以编辑锁定的记录。
